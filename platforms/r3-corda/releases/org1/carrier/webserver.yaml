apiVersion: helm.toolkit.fluxcd.io/v2beta1
kind: HelmRelease
metadata:
  name: carrier-springboot
  namespace: carrier-ns
  annotations:
    fluxcd.io/automated: "false"
spec:
  releaseName: carrier-springboot
  interval: 1m
  chart:
    spec:
      chart: examples/supplychain-app/charts/springbootwebserver
      sourceRef:
        kind: GitRepository
        name: flux-corda-app
        namespace: flux-corda-app
  values:
    image:
      webserver: ghcr.io/hyperledger/bevel-supplychain-corda:springboot-latest
      initContainer: ghcr.io/hyperledger/bevel-alpine:latest
      imagePullSecret: regcred
    smartContract:
      JAVA_OPTIONS : -Xmx512m
    nodeConf:
      node: carrier
      nodeRpcPort: 10003
      legalName: O=Carrier,OU=Carrier,L=London,C=GB
      devMode: false
      useSSL: false
      readinessCheckInterval: 10
      readinessThreshold: 15
    credentials:
      rpcUser: nodeoperations
      rpcUserPassword: nodeoperationsAdmin
      keystorePassword: newpass
      truststorePassword: newtrustpass
    resources:
      limits: "512Mi"
      requests: "512Mi"
    storage:
      memory: 512Mi
      name: storage-carrier
    web:
      targetPort: 20001
      port: 20001
